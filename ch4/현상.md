# ì³…í„°04. ì„¤ê³„ í’ˆì§ˆê³¼ íŠ¸ë ˆì´ë“œì˜¤í”„

**ê°ì²´ì§€í–¥ ì„¤ê³„ì˜ í•µì‹¬ì€ ì—­í• , ì±…ì„, í˜‘ë ¥**ì´ë‹¤.

ê°ì²´ì§€í–¥ ì„¤ê³„ì— ê´€í•œ ë‘ ê°€ì§€ ê´€ì .

1. ê°ì²´ì§€í–¥ ì„¤ê³„ì˜ í•µì‹¬ì€ ì±…ì„ì´ë‹¤.
2. ì±…ì„ì„ í• ë‹¹í•˜ëŠ” ì‘ì—…ì´ ì‘ì§‘ë„ì™€ ê²°í•©ë„ ê°™ì€ ì„¤ê³„ í’ˆì§ˆê³¼ ê¹Šì´ ì—°ê´€ë¼ ìˆë‹¤.

ê²°í•©ë„ì™€ ì‘ì§‘ë„ë¥¼ í•©ë¦¬ì ì¸ ìˆ˜ì¤€ìœ¼ë¡œ ìœ ì§€í•  ìˆ˜ ìˆëŠ” ì¤‘ìš”í•œ ì›ì¹™

- ê°ì²´ì˜ ìƒíƒœê°€ ì•„ë‹ˆë¼ ê°ì²´ì˜ í–‰ë™ì— ì´ˆì ì„ ë§ì¶˜ë‹¤.
    - ê°ì²´ë¥¼ ë‹¨ìˆœí•œ ë°ì´í„°ì˜ ì§‘í•©ìœ¼ë¡œ ë°”ë¼ë³´ëŠ” ì‹œê°ì€ ê°ì²´ì˜ ë‚´ë¶€ êµ¬í˜„ì„ ë…¸ì¶œì‹œí‚¤ëŠ” ê²°ê³¼ë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë³€ê²½ì— ì·¨ì•½í•´ì§„ë‹¤.
- ì±…ì„ì€ ê°ì²´ì˜ ìƒíƒœì—ì„œ í–‰ë™ìœ¼ë¡œ, ë‚˜ì•„ê°€ ê°ì²´ì™€ ê°ì²´ ì‚¬ì´ì˜ ìƒí˜¸ì‘ìš©ìœ¼ë¡œ ì„¤ê³„ ì¤‘ì‹¬ì„ ì´ë™ì‹œí‚¤ê³ , ê²°í•©ë„ê°€ ë‚®ê³  ì‘ì§‘ë„ê°€ ë†’ìœ¼ë©° êµ¬í˜„ì„ íš¨ê³¼ì ìœ¼ë¡œ ìº¡ìŠí™” í•˜ëŠ” ê°ì²´ë“¤ì„ ì°½ì¡°í•  ìˆ˜ ìˆëŠ” ê¸°ë°˜ì„ ì œê³µí•œë‹¤.

## 01. ë°ì´í„° ì¤‘ì‹¬ì˜ ì˜í™” ì˜ˆë§¤ ì‹œìŠ¤í…œ

ê°ì²´ì§€í–¥ ì„¤ê³„ì—ì„œëŠ” ë‘ ê°€ì§€ ë°©ë²•ì„ ì´ìš©í•´ ì‹œìŠ¤í…œì„ ê°ì²´ë¡œ ë¶„í•  í•  ìˆ˜ ìˆë‹¤.

1. ìƒíƒœ(ë°ì´í„°)ë¥¼ ë¶„í• ì„ ì¤‘ì‹¬ì¶•ìœ¼ë¡œ ì‚¼ëŠ” ë°©ë²•
2. ì±…ì„ì„ ë¶„í• ì˜ ì¤‘ì‹¬ì¶•ìœ¼ë¡œ ì‚¼ëŠ” ë°©ë²•

**ë°ì´í„° ì¤‘ì‹¬**ì˜ ê´€ì ì—ì„œ ê°ì²´ëŠ” ìì‹ ì´ í¬í•¨í•˜ê³  ìˆëŠ” ë°ì´í„°ë¥¼ ì¡°ì‘í•˜ëŠ” ë° í•„ìš”í•œ ì˜¤í¼ë ˆì´ì…˜ì„ ì •ì˜í•˜ê³  ê°ì²´ì˜ ìƒíƒœì— ì´ˆì ì„ ë§ì¶”ë©° ê°ì²´ë¥¼ ë…ë¦½ëœ ë°ì´í„° ë©ì–´ë¦¬ë¡œ ë°”ë¼ë³¸ë‹¤.

**ì±…ì„ ì¤‘ì‹¬**ì˜ ê´€ì ì—ì„œ ê°ì²´ëŠ” ë‹¤ë¥¸ ê°ì²´ê°€ ìš”ì²­í•  ìˆ˜ ìˆëŠ” ì˜¤í¼ë ˆì´ì…˜ì„ ìœ„í•´ í•„ìš”í•œ ìƒíƒœë¥¼ ë³´ê´€í•˜ê³  ê°ì²´ì˜ í–‰ë™ì— ì´ˆì ì„ ë§ì¶”ë©° ê°ì²´ë¥¼ í˜‘ë ¥í•˜ëŠ” ê³µë™ì²´ì˜ ì¼ì›ìœ¼ë¡œ ë°”ë¼ë³¸ë‹¤.

í›Œë¥­í•œ ê°ì²´ì§€í–¥ ì„¤ê³„ëŠ” ë°ì´í„°ê°€ ì•„ë‹ˆë¼ **ì±…ì„ì— ì´ˆì **ì„ ë§ì¶°ì•¼ í•œë‹¤. ì´ìœ ëŠ” ë³€ê²½ê³¼ ê´€ë ¨ì´ ìˆë‹¤.

### ë°ì´í„°ë¥¼ ì¤€ë¹„í•˜ì

- Movie

```java
public class Movie {
	private String title;
	private Duration runningTime;
	private Money fee;
	private List<DiscountCondition> discountConditions;
	
	private MovieType movieType;
	private Money discountAmount;
	private double discountPercent;

	public MovieType getMovieType() {
		return movieType;
	}
	
	public void setMovieType(MovieType movieType) {
		this.movieType = movieType;
	}
	
	public Money getFee() {
		return fee;
	}
	
	public void setFee(Money fee) {
		this.fee = fee;
	}
	
	public List<DiscountCondition> getDiscountConditions() {
		return discountConditions;
	}
	
	public void setDiscountConditions(List<DiscountCondition> discountConditions) {
		this.discountConditions = discountConditions;
	}
	
	public Money getDiscountAmount() {
		return discountAmount;
	}
	
	public void setDiscountAmount(Money discountAmount) {
		this.discountAmount = discountAmount;
	}
	
	public double getDiscountPercent() {
		return discountPercent;
	}
	
	public void setDiscountPercent(double discountPercent) {
		this.discountPercent = discountPercent;
	}
}
```

- MovieType

```java
public enum MovieType {
    AMOUNT_DISCOUNT,
    PERCENT_DISCOUNT,
    NONE_DISCOUNT;
}
```

ê¸°ì¡´ ì½”ë“œì™€ ì°¨ì´ì 

- í• ì¸ ì¡°ê±´ì˜ ëª©ë¡ì´ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¡œ Movie ì•ˆì— ì§ì ‘ í¬í•¨
- í• ì¸ ì •ì±…ì— ì‚¬ìš©ë˜ëŠ” í• ì¸ ê¸ˆì•¡ê³¼ í• ì¸ ë¹„ìœ¨ì„ Movie ì•ˆì—ì„œ ì§ì ‘ ì •ì˜
- MovieTypeì´ë¼ëŠ” ì—´ê±°í˜•íƒ€ì… ì¸ìŠ¤í„´ìŠ¤ë¥¼ í†µí•´ í• ì¸ ì •ì±…ì„ ì„ íƒí•¨.

- DiscountCondition

```java
public class DiscountCondition {
	private DiscountConditionType type;
	
	private int sequence;
	
	private DayOfWeek dayOfWeek;
	private LocalTime startTime;
	private LocalTime endTime;

	public DiscountConditionType getType() {
		return type;
	}
	
	public void setType(DiscountConditionType type) {
		this.type = type;
	}
	
	public DayOfWeek getDayOfWeek() {
		return DayOfWeek;
	}
	
	public void setDayOfWeek(DayOfWeek dayOfWeek) {
		this.dayOfWeek = dayOfWeek;
	}
	
	public LocalTime getStartTime() {
		return startTime;
	}
	
	public void setStartTime(LocalTime startTime) {
		this.startTime = startTime;
	}
	
	public LocalTime getEndTime() {
		return endTime;
	}
	
	public void setEndTime(LocalTime endTime) {
		this.endTime = endTime;
	}
	
	public int getSequence() {
		return sequence;
	}
	
	public void setSequence() {
		this.sequence = sequence;
	}
}

public enum DiscountConditionType {
	SEQUENCE,
	PERIOD;
}
```

- Screening

```java
public class Screening {
private Movie movie;
private int sequence;
private LocalDateTime whenScreened;

public Movie getMovie() {
		return movie;
	}
	
public void setMovie() {
		this.movie = movie;
	}

public int getWhenScreened() {
		return whenScreened;
	}
	
public void setWhenScreened() {
		this.whenScreened = whenScreened;
	}

public int getSequence() {
		return sequence;
	}
	
public void setSequence() {
		this.sequence = sequence;
	}
}
```

- Reservation

```java
public class Reservation {
	private Customer customer;
	private Screening screening;
	private Money fee;
	private int audienceCount;

public int getCustomer() {
		return customer;
	}
	
public void setCustomer() {
		this.customer = customer;
	}

public int getScreening() {
		return screening;
	}
	
public void setScreening() {
		this.screening = screening;
	}

public int getFee() {
		return fee;
	}
	
public void setFee() {
		this.fee = fee;
	}

public int getAudienceCount() {
		return audienceCount;
	}
	
public void setAudienceCount() {
		this.audienceCount = audienceCount;
	}
}
```

- Customer

```java
public class Customer {
	private String name;
	private String id;

	public Customer(String name, String id) {
		this.id = id;
		this.name = name;
	}
}
```

ìœ„ ë°ì´í„° í´ë˜ìŠ¤ë“¤ì˜ êµ¬ì¡°ëŠ” ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ë‹¤.

![4-1](https://github.com/effectiveJava-study/Object/assets/10612909/a1e5a456-0854-41c5-930c-73bd90c005a9)

### ì˜í™”ë¥¼ ì˜ˆë§¤í•˜ì

- ReservationAgency

```java
public class ReservationAgency {
	public Reservation reserve(Screening screening, Customer customer, int audienceCount) {
		Movie movie = screening.getMovie();
	
		boolean discountable = false;
		for (DiscountCondition discountCondition : movie.getDiscountConditions()) {
			if (discountCondition.getType() == DiscountConditionType.PERIOD) {
				discountable = screening.getWhenScreened().getDayOfWeek().equals(discountCondition.getDayOfWeek()) &&
				discountCondition.getStartTime().compareTo(screening.getWhenScreened().toLocalTime()) <= 0 &&
				discountCondition.getEndTime().compareTo(screening.getWhenScreened().toLocalTime()) >= 0;
			} else {
				discountable = discountCondition.getSequence() == screening.getSequence();
			}
			if (discountable) {
				break;
			}
		}
	
	Money fee;
	if (discountable) {
		Money discountAmount = Money.ZERO;
		switch (movie.getMovieType()) {
			case AMOUNT_DISCOUNT:
				discountAmount = movie.getDiscountAmount();
				break;
			case PERCENT_DISCOUNT:
				discountAmount = movie.getFee().times(movie.getDiscountPercent());
				break;
			case NONE_DISCOUNT:
				discountAmount = Money.ZERO;
				break;
	}
		fee = movie.getFee().minus(discountAmount);
	} else {
		fee = movie.getFee();
	}

		return new Reservation(customer, screening, fee, audienceCount);
	}
}
```

reserve ë©”ì„œë“œëŠ” í¬ê²Œ ë‘ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤. ì²« ë²ˆì§¸ëŠ” ë°˜ë³µë¬¸ì„ ëŒë©´ì„œ í• ì¸ ê°€ëŠ¥ ì—¬ë¶€ë¥¼ discounttableì— í• ë‹¹í•˜ëŠ” ê²ƒì´ê³ , ë‘ ë²ˆì§¸ëŠ” discountable ê°’ì„ ì²´í¬í•˜ê³  ì ì ˆí•œ í• ì¸ ì •ì±…ì— ë”°ë¼ ìš”ê¸ˆì„ ê³„ì‚°í•˜ëŠ” ifë¬¸ì´ë‹¤.

## 02. ì„¤ê³„ íŠ¸ë ˆì´ë“œì˜¤í”„

ë°ì´í„° ì¤‘ì‹¬ì˜ ì„¤ê³„ì™€ ì±…ì„ ì¤‘ì‹¬ ì„¤ê³„ì˜ ì¥ë‹¨ì ì„ ë¹„êµí•˜ê¸° ìœ„í•´ **ìº¡ìŠí™”, ì‘ì§‘ë„, ê²°í•©ë„**ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

- ìº¡ìŠí™”
    - ì™¸ë¶€ì—ì„œ ì•Œ í•„ìš”ê°€ ì—†ëŠ” ë¶€ë¶„ì„ ê°ì¶¤ìœ¼ë¡œì¨ ëŒ€ìƒì„ ë‹¨ìˆœí™”í•˜ëŠ” ì¶”ìƒí™”ì˜ í•œ ì¢…ë¥˜
    - ë³€ê²½ë  ê°€ëŠ¥ì„±ì´ ë†’ì€ ë¶€ë¶„ì„ **êµ¬í˜„**, ìƒëŒ€ì ìœ¼ë¡œ ì•ˆì •ì ì¸ ë¶€ë¶„ì„ **ì¸í„°í˜ì´ìŠ¤**
    - ì„¤ê³„ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì›ë¦¬ëŠ” ë¶ˆì•ˆì •í•œ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ì„ ì•ˆì •ì ì´ ì¸í„°í˜ì´ìŠ¤ ë’¤ë¡œ ìº¡ìŠí™” í•˜ëŠ”ê²ƒ
    - ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ì€ ë¶€ë¶„ì„ ê°ì²´ ë‚´ë¶€ë¡œ ìˆ¨ê¸°ëŠ” ì¶”ìƒí™” ê¸°ë²•
- ì‘ì§‘ë„
    - ëª¨ë“ˆì— í¬í•¨ëœ ë‚´ë¶€ ìš”ì†Œë“¤ì´ ì—°ê´€ë¼ ìˆëŠ” ì •ë„
    - ìš”ì†Œë“¤ì´ í•˜ë‚˜ì˜ ëª©ì ì„ ìœ„í•´ ê¸´ë°€í•˜ê²Œ í˜‘ë ¥í•˜ë©´ ë†’ì€ ì‘ì§‘ë„, ì„œë¡œ ë‹¤ë¥¸ ëª©ì ì„ ì¶”êµ¬í•œë‹¤ë©´ ë‚®ì€ ì‘ì§‘ë„ë¥¼ ê°€ì¡Œë‹¤ê³  ë§í•  ìˆ˜ ìˆë‹¤.
    - ë³€ê²½ì˜ ê´€ì ì—ì„œ ì‘ì§‘ë„ë€ **ë³€ê²½ì´ ë°œìƒí•  ë•Œ ëª¨ë“ˆ ë‚´ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” ë³€ê²½ì˜ ì •ë„**ë¡œ ì¸¡ì •ì´ ê°€ëŠ¥í•˜ë‹¤.
    
![4-2](https://github.com/effectiveJava-study/Object/assets/10612909/ae5f1479-adfd-42bd-a47d-b88385c7e895)
    
- ê²°í•©ë„
    - ì˜ì¡´ì„±ì˜ ì •ë„ë¥¼ ë‚˜íƒ€ë‚´ë©° ë‹¤ë¥¸ ëª¨ë“ˆì— ëŒ€í•œ ì–¼ë§ˆë‚˜ ë§ì€ ì§€ì‹ì„ ê°–ê³  ìˆëŠ”ì§€ ë‚˜íƒ€ë‚´ëŠ” ì²™ë„ì´ë‹¤.
    - ì–´ë–¤ ëª¨ë“ˆì´ ë‹¤ë¥¸ ëª¨ë“ˆì— ëŒ€í•´ ë„ˆë¬´ ìì„¸í•œ ë¶€ë¶„ê¹Œì§€ ì•Œê³  ìˆë‹¤ë©´ ë‘ ëª¨ë“ˆì€ ë†’ì€ ê²°í•©ë„ë¥¼ ê°€ì§„ë‹¤.
    - ê°ì²´ì§€í–¥ì˜ ê´€ì ì—ì„œ ê²°í•©ë„ëŠ” ê°ì²´ ë˜ëŠ” í´ë˜ìŠ¤ê°€ í˜‘ë ¥ì— í•„ìš”í•œ ì ì ˆí•œ ìˆ˜ì¤€ì˜ ê´€ê³„ë§Œ ìœ ì§€í•˜ê³  ìˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
    - ë³€ê²½ì˜ ê´€ì ì—ì„œ ê²°í•©ë„ë€ **í•œ ëª¨ë“ˆì´ ë³€ê²½ë˜ê¸° ìœ„í•´ ë‹¤ë¥¸ ëª¨ë“ˆì˜ ë³€ê²½ì„ ìš”êµ¬í•˜ëŠ” ì •ë„**ë¡œ ì¸¡ì •ì´ ê°€ëŠ¥í•˜ë‹¤.
        
![4-3](https://github.com/effectiveJava-study/Object/assets/10612909/04c85dd6-92f5-42a2-b5ba-a41ec4182bd2)        
    

ìº¡ìŠí™”ë¥¼ ì§€í‚¤ë©´ ëª¨ë“ˆ ì•ˆì˜ ì‘ì§‘ë„ëŠ” ë†’ì•„ì§€ê³  ëª¨ë“ˆ ì‚¬ì´ì˜ ê²°í•©ë„ëŠ” ë‚®ì•„ì§„ë‹¤. ìº¡ìŠí™”ë¥¼ ìœ„ë°˜í•˜ë©´ ëª¨ë“ˆ ì•ˆì˜ ì‘ì§‘ë„ëŠ” ë‚®ì•„ì§€ê³  ëª¨ë“ˆ ì‚¬ì´ì˜ ê²°í•©ë„ëŠ” ë†’ì•„ì§„ë‹¤. ë”°ë¼ì„œ **ì‘ì§‘ë„ì™€ ê²°í•©ë„ë¥¼ ê³ ë ¤í•˜ê¸° ì „ì— ë¨¼ì € ìº¡ìŠí™”ë¥¼ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•´ ë…¸ë ¥**í•˜ë¼.

## 03. ë°ì´í„° ì¤‘ì‹¬ì˜ ì˜í™” ì˜ˆë§¤ ì‹œìŠ¤í…œì˜ ë¬¸ì œì 

ë°ì´í„° ì¤‘ì‹¬ì˜ ì„¤ê³„ëŠ” ìº¡ìŠí™”ë¥¼ ìœ„ë°˜í•˜ê³  ê°ì²´ì˜ ë‚´ë¶€ êµ¬í˜„ì„ ì¸í„°í˜ì´ìŠ¤ì˜ ì¼ë¶€ë¡œ ë§Œë“ ë‹¤.

ë°ì´í„° ì¤‘ì‹¬ì˜ ì„¤ê³„ê°€ ê°€ì§„ ëŒ€í‘œì ì¸ ë¬¸ì œì 

- ìº¡ìŠí™” ìœ„ë°˜
- ë†’ì€ ê²°í•©ë„
- ë‚®ì€ ì‘ì§‘ë„

### ìº¡ìŠí™” ìœ„ë°˜

- Movie

```java
public class Movie{
	private Money fee;
	
	public Money getFee() {
		return fee;
	}
	
	public void setFee(Money fee) {
		this.fee = fee;
	}
}
```

- Movie ë‚´ë¶€ì— Money íƒ€ì…ì˜ feeë¼ëŠ” ì´ë¦„ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ê°€ ì¡´ì¬í•œë‹¤ëŠ” ì‚¬ì‹¤ì„ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì— ë“œëŸ¬ë‚¸ë‹¤.
- ê°ì²´ê°€ ìˆ˜í–‰í•  ì±…ì„ì´ ì•„ë‹ˆë¼ ë‚´ë¶€ì— ì €ì¥í•  ë°ì´í„°ì— ì´ˆì ì„ ë§ì·„ê¸° ë•Œë¬¸ì— ìº¡ìŠí™” ì›ì¹™ì„ ìœ„ë°°
- ì„¤ê³„ ì‹œ í˜‘ë ¥ì— ê´€í•´ ê³ ë¯¼í•˜ì§€ ì•Šìœ¼ë©´ ìº¡ìŠí™”ë¥¼ ìœ„ë°˜í•˜ëŠ” ê³¼ë„í•œ ì ‘ê·¼ìì™€ ìˆ˜ì •ìë¥¼ ê°€ì§€ê²Œ ëœë‹¤.
- ì´ì²˜ëŸ¼ ì ‘ê·¼ìì™€ ìˆ˜ì •ìì— ê³¼ë„í•˜ê²Œ ì˜ì¡´í•˜ëŠ” ì„¤ê³„ ë°©ì‹ì„ **ì¶”ì¸¡ì— ì˜í•œ ì„¤ê³„ ì „ëµ(design-by-guessing strategy)** ë¼ê³  í•œë‹¤.

### ë†’ì€ ê²°í•©ë„

- ReservationAgency

```java
public class ReservationAgency {
	public Reservation reserve(Screening screening, Customer customer, int audienceCount) {
		...
		Money fee;
	if (discountable) {
		...
		fee = movie.getFee().minus(discountAmount).times(audienceCount);
	} else {
		fee = movie.getFee().times(audienceCount);
	}
	...
	}
}
```

ê²°í•©ë„ ì¸¡ë©´ì—ì„œ ì œì–´ ë¡œì§ì´ íŠ¹ì • ê°ì²´ ì•ˆì— ì§‘ì¤‘ë˜ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ ì œì–´ ê°ì²´ê°€ ë‹¤ìˆ˜ì˜ ë°ì´í„° ê°ì²´ì— ê°•í•˜ê²Œ ê²°í•©ëœë‹¤ëŠ” ê²ƒì´ë‹¤.

ì‹œìŠ¤í…œ ì•ˆì˜ ì–´ë–¤ ë³€ê²½ë„ ReservationAgencyì˜ ë³€ê²½ì„ ìœ ë°œí•œë‹¤.

![4-4](https://github.com/effectiveJava-study/Object/assets/10612909/3cb3c205-ed78-4c5f-b9ef-eaa6b8c03cd4)

ë°ì´í„° ì¤‘ì‹¬ì˜ ì„¤ê¼ëŠ” ì „ì²´ ì‹œìŠ¤í…œì„ í•˜ë‚˜ì˜ ê±°ëŒ€í•œ ì˜ì¡´ì„± ë©ì–´ë¦¬ë¡œ ë§Œë“¤ì–´ ë²„ë¦¬ê¸° ë•Œë¬¸ì— ì–´ë–¤ ë³€ê²½ì´ë¼ë„ ì¼ë‹¨ ë°œìƒí•˜ê³  ë‚˜ë©´ ì‹œìŠ¤í…œ ì „ì²´ê°€ ìš”ë™ì¹  ìˆ˜ ë°–ì— ì—†ë‹¤.

### ë‚®ì€ ì‘ì§‘ë„

ì„œë¡œ ë‹¤ë¥¸ ì´ìœ ë¡œ ë³€ê²½ë˜ëŠ” ì½”ë“œê°€ í•˜ë‚˜ì˜ ëª¨ë“ˆ ì•ˆì— ê³µì¡´í•  ë•Œ ëª¨ë“ˆì˜ ì‘ì§‘ë„ê°€ ë‚®ë‹¤ê³  ë§í•œë‹¤.

í˜„ì¬ì˜ ì„¤ê³„ëŠ” ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìƒˆë¡œìš´ í• ì¸ ì¡°ê±´ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ í•˜ë‚˜ ì´ìƒì˜ í´ë˜ìŠ¤ë¥¼ ë™ì‹œì— ìˆ˜ì •í•´ì•¼ í•œë‹¤.

<aside>
ğŸ’¡ **ë‹¨ì¼ ì±…ì„ ì›ì¹™(Single Responsibility Prinviple, SRP)**
í´ë˜ìŠ¤ëŠ” ë‹¨ í•œ ê°€ì§€ì˜ ë³€ê²½ ì´ìœ ë§Œ ê°€ì ¸ì•¼ í•œë‹¤.

</aside>

## 04. ììœ¨ì ì¸ ê°ì²´ë¥¼ í–¥í•´

### ìº¡ìŠí™”ë¥¼ ì§€ì¼œë¼

ê°ì²´ì—ê²Œ ì˜ë¯¸ ìˆëŠ” ë©”ì„œë“œëŠ” ê°ì²´ê°€ ì±…ì„ì ¸ì•¼ í•˜ëŠ” ë¬´ì–¸ê°€ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë©”ì„œë“œë‹¤. ì†ì„±ì˜ ê°€ì‹œì„±ì„ privateìœ¼ë¡œ ì„¤ì •í–ˆë‹¤ê³  í•´ë„ ì ‘ê·¼ìì™€ ìˆ˜ì •ìë¥¼ í†µí•´ ì†ì„±ì„ ì™¸ë¶€ë¡œ ì œê³µí•˜ê³  ìˆë‹¤ë©´ ìº¡ìŠí™”ë¥¼ ìœ„ë°˜í•˜ëŠ” ê²ƒì´ë‹¤.

- Rectangle

```java
class Rectangle {
private int left;
private int top;
private int right;
private int bottom;

public Rectangle {
		this.left = left;
		this.top = top;
		this.right = right;
		this.bottom = bottom;
	}
		
		public int getLeft() { return left; }
		public void setLeft(int left) { this.left = left; }
		
		public int getTop() { return top; }
		public void setTop(int top) { this.top = top; }
		
		public int getRight() { return right; }
		public void setRight(int right) { this.right = right; }
		
		public int getBottom() { return bottom; }
		public void setBottom(int bottom) { this.bottom = bottom; }
	}
}
```

ì´ ì‚¬ê²©í˜•ì˜ ë„ˆë¹„ì™€ ë†’ì´ë¥¼ ì¦ê°€ì‹œí‚¤ëŠ” ì½”ë“œê°€ í•„ìš”í•˜ë‹¤ê³  ê°€ì •í•˜ë©´ ì•„ë§ˆ ì´ ì½”ë“œëŠ” Rectangle ì™¸ë¶€ì˜ ì–´ë–¤ í´ë˜ìŠ¤ ì•ˆì— ë‹¤ìŒê³¼ ê°™ì´ êµ¬í˜„ë¼ ìˆì„ ê²ƒì´ë‹¤.

- AnyClass

```java
class AnyClass {
	void anyMethod(Rectangle rectangle, int multiple) {
		rectangle.setRight(rectangle.getRight() * multiple);
		rectangle.setBottom(rectangle.getBottom() * multiple);
		...
	}
}
```

ìœ„ ì½”ë“œì˜ ë¬¸ì œì  ì²« ë²ˆì§¸ëŠ” **ì½”ë“œ ì¤‘ë³µ**ì´ ë°œìƒí•  í™•ë¥ ì´ ë†’ë‹¤ëŠ” ê²ƒì´ë‹¤. ì‚¬ê°í˜•ì˜ ë„ˆë¹„ì™€ ë†’ì´ë¥¼ ì¦ê°€ì‹œí‚¤ëŠ” ì½”ë“œê°€ í•„ìš”í•˜ë‹¤ë©´ ì•„ë§ˆ getRight, getBottom ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê³  setRight, setBottom ë©”ì„œë“œë¥¼ ìˆ˜ì •í•˜ëŠ” ìœ ì‚¬í•œ ì½”ë“œê°€ ì¡´ì¬í•  ê²ƒì´ë‹¤.

ë‘ ë²ˆì§¸ ë¬¸ì œì ì€ **ë³€ê²½ì— ì·¨ì•½**í•˜ë‹¤ëŠ” ì ì´ë‹¤. Rectangleì´ rightì™€ bottomëŒ€ì‹  lengthì™€ heightë¥¼ ì´ìš©í•´ì„œ ì‚¬ê°í˜•ì„ í‘œí˜„í•˜ê±°ë‚˜ typeì„ ë³€ê²½í•œë‹¤ê³  í•˜ë©´ í•´ë‹¹ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ë“¤ì€ ëª¨ë‘ ìˆ˜ì • í•´ì£¼ì–´ì•¼ í•œë‹¤.

### ìŠ¤ìŠ¤ë¡œ ìì‹ ì˜ ë°ì´í„°ë¥¼ ì±…ì„ì§€ëŠ” ê°ì²´

ìƒíƒœì™€ í–‰ë™ì„ ê°ì²´ë¼ëŠ” í•˜ë‚˜ì˜ ë‹¨ìœ„ë¡œ ë¬¶ëŠ” ì´ìœ ëŠ” ê°ì²´ ìŠ¤ìŠ¤ë¡œ ìì‹ ì˜ ìƒíƒœë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•´ì„œë‹¤.

ê°ì²´ë¥¼ ì„¤ê³„í•  ë•Œ â€œì´ ê°ì²´ê°€ ì–´ë–¤ ë°ì´í„°ë¥¼ í¬í•¨í•´ì•¼ í•˜ëŠ”ê°€?â€ ë¼ëŠ” ì§ˆë¬¸ì€ ë‹¤ìŒê³¼ ê°™ì€ ë‘ ê°œì˜ ê°œë³„ì ì¸ ì§ˆë¬¸ìœ¼ë¡œ ë¶„ë¦¬í•´ì•¼í•œë‹¤.

- ì´ ê°ì²´ê°€ ì–´ë–¤ ë°ì´í„°ë¥¼ í¬í•¨í•´ì•¼ í•˜ëŠ”ê°€?
- ì´ ê°ì²´ê°€ ë°ì´í„°ì— ëŒ€í•´ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ì˜¤í¼ë ˆì´ì…˜ì€ ë¬´ì—‡ì¸ê°€?

- DiscountCondition

```java
public class DiscountCondition {
private DiscountConditionType type;
private int sequence;
private DayOfWeek dayOfWeek;
private LocalTime startTime;
private LocalTime endTime;

	public DiscountConditionType getType() {
		return type;
	}

	public boolean isDiscountable(DayOfWeek dayOfWeek, LocalTime time) {
		if (type != DiscountConditionType.PERIOD) {
			throw new IllegalArgumentException();
		}
	return this.dayOfWeek.equals(dayOfWeek) &&
					this.startTime.compareTo(time) <= 0 &&
					this.endTime.compareTo(time) >= 0;
	}

	public boolean isDiscountable(int sequence) {
		if(type != DiscountConditionType.SEQUENCE) {
			throw new IllegalArgumentException();
		}
	return this.sequence == sequence;
	}
}
```

- Movie

```java
public class Movie {
    private String title;
    private Duration runningTime;
    private Money fee;
    private List<DiscountCondition> discountConditions;

    private MovieType movieType;
    private Money discountAmount;
    private double discountPercent;

    public MovieType getMovieType() {
        return movieType;
    }

    public Money calculateAmountDiscountedFee() {
        if (movieType != MovieType.AMOUNT_DISCOUNT) {
            throw new IllegalArgumentException();
        }

        return fee.minus(discountAmount);
    }

    public Money calculatePercentDiscountedFee() {
        if (movieType != MovieType.PERCENT_DISCOUNT) {
            throw new IllegalArgumentException();
        }

        return fee.minus(fee.times(discountPercent));
    }

    public Money calculateNoneDiscountedFee() {
        if (movieType != MovieType.NONE_DISCOUNT) {
            throw new IllegalArgumentException();
        }

        return fee;
    }

    public boolean isDiscountable(LocalDateTime whenScreened, int sequence) {
        for(DiscountCondition condition : discountConditions) {
            if (condition.getType() == DiscountConditionType.PERIOD) {
                if (condition.isDiscountable(whenScreened.getDayOfWeek(), whenScreened.toLocalTime())) {
                    return true;
                }
            } else {
                if (condition.isDiscountable(sequence)) {
                    return true;
                }
            }
        }

        return false;
    }
}
```

- Screening

```java
public class Screening {
    private Movie movie;
    private int sequence;
    private LocalDateTime whenScreened;

    public Screening(Movie movie, int sequence, LocalDateTime whenScreened) {
        this.movie = movie;
        this.sequence = sequence;
        this.whenScreened = whenScreened;
    }

    public Money calculateFee(int audienceCount) {
        switch (movie.getMovieType()) {
            case AMOUNT_DISCOUNT:
                if (movie.isDiscountable(whenScreened, sequence)) {
                    return movie.calculateAmountDiscountedFee().times(audienceCount);
                }
                break;
            case PERCENT_DISCOUNT:
                if (movie.isDiscountable(whenScreened, sequence)) {
                    return movie.calculatePercentDiscountedFee().times(audienceCount);
                }
            case NONE_DISCOUNT:
                movie.calculateNoneDiscountedFee().times(audienceCount);
        }

        return movie.calculateNoneDiscountedFee().times(audienceCount);
    }
}
```

![4-5](https://github.com/effectiveJava-study/Object/assets/10612909/4dd1b3ce-e460-48d1-8310-5630d0f2bbe8)

ë‘ ë²ˆì§¸ ì„¤ê³„ê°€ ì²« ë²ˆì§¸ ì„¤ê³„ë³´ë‹¤ ë‚´ë¶€ êµ¬í˜„ì„ ë” ë©´ë°€í•˜ê²Œ ìº¡ìŠí™”í•˜ê³  ìˆë‹¤. ë‘ ë²ˆì§¸ ì„¤ê³„ì—ì„œëŠ” ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° í•„ìš”í•œ ë©”ì„œë“œë¥¼ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê°œì²´ê°€ ìŠ¤ìŠ¤ë¡œ êµ¬í˜„í•˜ê³  ìˆë‹¤. ë”°ë¼ì„œ ì´ ê°ì²´ë“¤ì€ ìŠ¤ìŠ¤ë¡œ ì±…ì„ì§„ë‹¤ê³  ë§í•  ìˆ˜ ìˆë‹¤.

## 05. í•˜ì§€ë§Œ ì—¬ì „íˆ ë¶€ì¡±í•˜ë‹¤.

### ìº¡ìŠí™” ìœ„ë°˜

DiscountConditionì˜ ê¸°ê°„ ì¡°ê±´ì„ íŒë‹¨í•˜ëŠ” isDiscountable ë§¤ì„œë“œì˜ ë§¤ê°œë³€ìˆ˜ë¡œ DiscountConditionì— ì†ì„±ìœ¼ë¡œ í¬í•¨ë¼ ìˆëŠ” ì •ë³´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì˜¨ë‹¤. ì´ ë©”ì„œë“œëŠ” ë§¤ê°œë³€ìˆ˜ë¥¼ í†µí•´ì„œ ê°ì²´ê°€ DayOfWeek íƒ€ì…ì˜ ìš”ì¼ê³¼ LocalTime íƒ€ì…ì˜ ì‹œê°„ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆë‹¤ëŠ” ê²ƒì„ ì™¸ë¶€ì— ë…¸ì¶œí•˜ê¸° ë•Œë¬¸ì— ìº¡ìŠí™”ì— ìœ„ë°˜ëœë‹¤.

ë˜í•œ DiscountConditionì˜ ì†ì„±ì„ ë³€ê²½í•´ì•¼ í•œë‹¤ë©´ isDiscountable ë©”ì„œë“œì˜ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì •í•˜ê³  í•´ë‹¹ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ë„ í•¨ê¼ ìˆ˜ì •í•´ì•¼í•  ê²ƒì´ë‹¤. ë‚´ë¶€ êµ¬í˜„ì˜ ë³€ê²½ì´ ì™¸ë¶€ë¡œ í¼ì ¸ë‚˜ê°€ëŠ” **íŒŒê¸‰ íš¨ê³¼(repple effect)** ëŠ” ìº¡ìŠí™”ê°€ ë¶€ì¡±í•˜ë‹¤ëŠ” ëª…ë°±í•œ ì¦ê±°ì´ë‹¤.

<aside>
ğŸ’¡ **ìº¡ìŠí™”ì˜ ì§„ì •í•œ ì˜ë¯¸**
ë³€í•˜ëŠ” ì–´ë–¤ ê²ƒì´ë“  ê°ì¶”ëŠ” ê²ƒì„ ìº¡ìŠí™”ë¼ê³  í•œë‹¤.

</aside>

### ë†’ì€ ê²°í•©ë„

ìº¡ìŠí™”ì˜ ìœ„ë°˜ìœ¼ë¡œ ì¸í•´ DiscountConditionì˜ ë‚´ë¶€ êµ¬í˜„ì´ ì™¸ë¶€ë¡œ ë…¸ì¶œë˜ì—ˆê¸° ë•Œë¬¸ì— Movieì™€ DiscountConditionì€ ë†’ì€ ê²°í•©ë„ë¥¼ ê°€ì§€ê²Œ ë˜ì—ˆë‹¤.

ê²°í•©ë„ê°€ ë†’ì€ ì´ìœ ëŠ” DiscountConditionì—ì„œ ì •ì±… í• ì¸ ì¡°ê±´ì´ ì¶”ê°€ ë˜ê±°ë‚˜ ì‚­ì œë˜ë©´ Movie í´ë˜ìŠ¤ì˜ isDiscountable ë©”ì„œë“œ ë˜í•œ ë³€ê²½ì´ ë°œìƒí•˜ê¸° ë•Œë¬¸ì´ë‹¤.

### ë‚®ì€ ì‘ì§‘ë„

DiscountConditionì˜ ë³€ê²½ì´ ë°œìƒí•˜ë©´ Movie, Screeningì—ë„ ë³€ê²½ì´ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì‘ì§‘ë„ê°€ ë‚®ë‹¤ê³  í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

## 06. ë°ì´í„° ì¤‘ì‹¬ ì„¤ê³„ì˜ ë¬¸ì œì 

ë°ì´í„° ì¤‘ì‹¬ ì„¤ê³„ê°€ ë³€ê²½ì— ì·¨ì•½í•œ ì´ìœ ëŠ” ë‘ ê°€ì§€ë‹¤.

- ë°ì´í„° ì¤‘ì‹¬ì˜ ì„¤ê³„ëŠ” ë³¸ì§ˆì ìœ¼ë¡œ ë„ˆë¬´ ì´ë¥¸ ì‹œê¸°ì— ë°ì´í„°ì— ê´€í•´ ê²°ì •í•˜ë„ë¡ ê°•ìš”í•œë‹¤.
- ë°ì´í„° ì¤‘ì‹¬ì˜ ì„¤ê³„ì—ì„œëŠ” í˜‘ë ¥ì´ë¼ëŠ” ë¬¸ë§¥ì„ ê³ ë ¤í•˜ì§€ ì•Šê³  ê°ì²´ë¥¼ ê³ ë¦½ì‹œí‚¨ ì±„ ì˜¤í¼ë ˆì´ì…˜ì„ ê²°ì •í•œë‹¤.

### ë°ì´í„° ì¤‘ì‹¬ ì„¤ê³„ëŠ” ê°ì²´ì˜ í–‰ë™ë³´ë‹¤ëŠ” ìƒíƒœì— ì´ˆì ì„ ë§ì¶˜ë‹¤

ë°ì´í„° ì¤‘ì‹¬ ì„¤ê³„ëŠ” ë„ˆë¬´ ì´ë¥¸ ì‹œê¸°ì— ë°ì´í„°ì— ëŒ€í•´ ê³ ë¯¼í•˜ê¸° ë•Œë¬¸ì— ìº¡ìŠí™”ì— ì‹¤íŒ¨í•˜ê²Œ ëœë‹¤. ê°ì²´ì˜ ë‚´ë¶€ êµ¬í˜„ì´ ê°ì²´ì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì–´ì§€ëŸ½íˆê³  ê°ì²´ì˜ ì‘ì§‘ë„ì™€ ê²°í•©ë„ì— ë‚˜ìœ ì˜í–¥ì„ ë¯¸ì¹˜ê¸° ë•Œë¬¸ì— ë³€ê²½ì— ì·¨ì•½í•œ ì½”ë“œë¥¼ ë‚³ê²Œ ëœë‹¤.

### ë°ì´í„° ì¤‘ì‹¬ ì„¤ê³„ëŠ” ê°ì²´ë¥¼ ê³ ë¦½ì‹œí‚¨ ì±„ ì˜¤í¼ë ˆì´ì…˜ì„ ì •ì˜í•˜ë„ë¡ ë§Œë“ ë‹¤

í˜‘ë ¥ì´ë¼ëŠ” ë¬¸ë§¥ ì•ˆì—ì„œ í•„ìš”í•œ ì±…ì„ì„ ê²°ì •í•˜ê³  ì´ë¥¼ ìˆ˜í–‰í•  ì ì ˆí•œ ê°ì²´ë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤. **ì˜¬ë°”ë¥¸ ê°ì²´ì§€í–¥ ì„¤ê³„ì˜ ë¬´ê²Œì¤‘ì‹¬ì€ í•­ìƒ ê°ì²´ ë‚´ë¶€ê°€ ì•„ë‹ˆë¼ ì™¸ë¶€ì— ë§ì¶°**ì ¸ ìˆì–´ì•¼ í•œë‹¤.
